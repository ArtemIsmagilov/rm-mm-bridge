# Mattermost-Redmine Integrations

![header.png](./imgs/header.png "Diagram project.")

* **–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ mattermost –∏ redmine.**
* **–î–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –∏ –≥–ª–æ–±–∞–ª—å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é.**

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞](#–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞)
- [–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å](#–∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å)
- [–ö–æ–º–∞–Ω–¥—ã](#–∫–æ–º–∞–Ω–¥—ã)
- [–ù–µ–∫–æ—Ç–æ—Ä–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ](#–Ω–µ–∫–æ—Ç–æ—Ä–æ–µ-—Å–æ–≥–ª–∞—à–µ–Ω–∏–µ)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [–°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ö–µ–º–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º-—Å—Ä–µ–¥—É-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ redmine –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ docker-compose.yml](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-redmine-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞-—á–µ—Ä–µ–∑-docker-composeyml)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ mattermost –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ docker-compose.yml](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-mattermost-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞-—á–µ—Ä–µ–∑-docker-composeyml)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Redmine –∏ Mattermost](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏-redmine-–∏-mattermost)
- [–ü–æ–ª–µ–∑–Ω—ã–µ docker –∫–æ–º–∞–Ω–¥—ã](#–ø–æ–ª–µ–∑–Ω—ã–µ-docker-–∫–æ–º–∞–Ω–¥—ã)
- [–ê–≤—Ç–æ—Ç–µ—Å—Ç—ã](#–∞–≤—Ç–æ—Ç–µ—Å—Ç—ã)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Reverse Proxy –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-reverse-proxy-–¥–ª—è-–Ω–∞—à–µ–≥–æ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS(–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è) –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-https–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è-–¥–ª—è-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞](#–¥–ª—è-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
- [–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
- [–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏](#–ø–æ–ª–µ–∑–Ω—ã–µ-—Å—Å—ã–ª–∫–∏)
- [–° –∫–∞–∫–∏–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è –ø—Ä–æ–±–ª–µ–º–∞–º–∏](#—Å-–∫–∞–∫–∏–º–∏-—Å—Ç–æ–ª–∫–Ω—É–ª—Å—è-–ø—Ä–æ–±–ª–µ–º–∞–º–∏)
- [–ù–µ –ø–æ —Ç–µ–º–µ](#–Ω–µ-–ø–æ-—Ç–µ–º–µ)

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤. –û–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–∫–µ—Ç–æ–≤.
* –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–∏–∫–µ—Ç–æ–≤ –≤ redmine. –í—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∏–∫–µ—Ç—ã –Ω–∞ —Å–µ–±—è, –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å
  —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã.
* –†–∞—Å—à–∏—Ä—è–µ–º–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ü—Ä–æ–µ–∫—Ç –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è.
  –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≥—Ä—É–ø–ø—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞–º–∏,
  —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—á—Ç—É –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Å–æ–±—ã—Ç–∏—è–º, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, 
–¥–∞–ª—å–Ω–µ–π—à–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.
* –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ —Ñ–æ—Ä–º–µ Redmine –ø—Ä—è–º–æ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
* –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –≤ Redmine, –∞ –∏–º–µ–Ω–Ω–æ –Ω–∞ —Ç–∏–∫–µ—Ç—ã, –Ω–∞ –ø—Ä–æ–µ–∫—Ç—ã, –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞ `–ú–æ–∏ –∑–∞–¥–∞—á–∏`,
  –Ω–∞ `–°–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏`.
* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ç–∏–∫–µ—Ç–∞–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.
* –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Mattermost –∏ Redmine —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `.docker.env.`
* –ö–Ω–æ–ø–∫–∞ –∑–≤–æ–Ω–∫–∞ –≤ –Ø–Ω–¥–µ–∫—Å –¢–µ–ª–µ–º–æ—Å—Ç

## –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å

> üí° *–í –∫–æ–º–ø–∞–Ω–∏–∏ –µ—Å—Ç—å –≤—Å—Ç—Ä–µ—á–∏, –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –≤—Å—Ç—Ä–µ—á–∏ —Ä–∞–∑–¥–∞—é—Ç—Å—è –ø–æ—Ä—É—á–µ–Ω–∏—è. –ü–æ—Ä—É—á–µ–Ω–∏—è —Ç–µ—Ä—è—é—Ç—Å—è –∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è.*
> *–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ—Ä—É—á–µ–Ω–∏—è –∂–∏–≤—É—Ç –≤ —Ç–∏–∫–µ—Ç–∞—Ö –≤ –±–∞–≥—Ç—Ä–µ–∫–µ—Ä–µ.*
> *–•–æ—á–µ—Ç—Å—è, —á—Ç–æ–±—ã –≤—Å–µ –ø–æ—Ä—É—á–µ–Ω–∏—è –∂–∏–ª–∏ –≤ –±–∞–≥—Ç—Ä–µ–∫–µ—Ä–µ, —Ç–∞–º –º–æ–Ω–∏—Ç–æ—Ä–∏–ª–∏—Å—å –∏ –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å.*

## –ö–æ–º–∞–Ω–¥—ã
* –ó–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –æ—Ç–≤–µ—á–∞–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ python —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π Flask –≤ –≤–∏–¥–µ –±–æ—Ç–∞.

* –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ `/redmine` *commands

| –ö–æ–º–∞–Ω–¥—ã       | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                |
|---------------|-----------------------------------------------------------------------------------------|
| /help         | –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥–∞—Ö                               |
| /new_task     | –°–æ–∑–¥–∞—Ç—å –æ–¥–Ω—É –∑–∞–¥–∞—á—É –≤ —Ñ–æ—Ä–º–µ Redmine                                                     |
| /new_tasks    | –°–æ–∑–¥–∞—Ç—å –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É |
| /tasks_by_me  | –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —è –ø–æ—Ä—É—á–∏–ª –¥—Ä—É–≥–∏–º                                               |
| /tasks_for_me | –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –º–Ω–µ –∑–∞–¥–∞—á–∏                                                        |


## –ù–µ–∫–æ—Ç–æ—Ä–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ

+ –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–∏–∫–µ—Ç, –Ω–∞–ø–∏—à–∏—Ç–µ –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–∏–º–µ—Ä—É `#t(ID —Ç–∏–∫–µ—Ç–∞)`.
  –ù–∞–ø—Ä–∏–º–µ—Ä, `#t10`. –í–æ—Ç –æ–¥–∏–Ω –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤. ![screen9.png](./imgs/screen9.png "Example create link for tickets")

  –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Å—Å—ã–ª–∫—É, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–∫–µ—Ç. 

  **–í–∞–∂–Ω–æ–µ —É—Ç–æ—á–Ω–µ–Ω–∏–µ.** –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π –≤–µ–± —Å–æ–∫–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∫–∞–Ω–∞–ª–∞–º–∏, –¥–∏—Ä–µ–∫—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ—Ç–æ–∫–∞–º–∏. 
  –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫–∏ –≤ –≤–∏–¥–µ `#t(ID —Ç–∏–∫–µ—Ç–∞)` –≤ –¥–∏—Ä–µ–∫—Ç–µ, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É, –±–æ—Ç —Å–æ–∑–¥–∞—Å—Ç —Å—Å—ã–ª–∫–∏ –≤ —Ç–µ–∫—Å—Ç–µ. 
  –ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ –≤ –∫–∞–Ω–∞–ª–µ –∏–ª–∏ –ø–æ—Ç–æ–∫–µ, –∏–ª–∏ –≤ –¥–∏—Ä–µ–∫—Ç–µ –±–æ—Ç–∞, —Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –Ω–µ –Ω—É–∂–Ω–æ.
  
  
  > ###### Mattermost API Reference
  > This is an example of making a user_typing request, with the purpose of alerting the server that the connected 
  > client has begun typing in a **channel** or **thread**.

  –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∞—à–∏—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ —Ç–∏–∫–µ—Ç—ã –≤ –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —á–∞—Å—Ç–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è.
  
  >#### https://developers.mattermost.com/integrate/reference/bot-accounts/#bot-account-creation
  ><br>
  > To add the bot account to teams and channels you want it to interact in, select the team drop-down menu, then select <br> 
  > Invite People. Next, select Invite Member and enter the bot account in the Add or Invite People field. Then select <br>
  > Invite Members. You should now be able to add the bot account to channels like any other user.<br>
  

+ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥—É
  https://drive.google.com/file/d/16RAOr7d5huqCDg7T4-Ww5wqewNmREY-n/view?usp=sharing


+ –î–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Redmine –∏ Mattermost –≤–ø–∏—à–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π **(–ª–æ–≥–∏–Ω –≤ redmine)=(–ª–æ–≥–∏–Ω –≤ mattermost)** –≤ `.docker.env`. –ü—Ä–∏–º–µ—Ä
  - **mattermost_username=redmine_username**
  - **seconad_username_in_mattermost=second_username_in_redmine**

  **–°—Ç—Ä–æ–≥–æ, —Å–Ω–∞—á–∞–ª–∞ –ª–æ–≥–∏–Ω –º–∞—Ç—Ç–µ—Ä–º–æ—Å—Ç–∞=–ª–æ–≥–∏–Ω —Ä–µ–¥–º–∞–π–Ω–∞**

+ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Ç–∏–∫–µ—Ç–∞ –≤ —Å—Å—ã–ª–∫—É —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ò–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
  > ### Create a ephemeral post <br>
  > Create a new ephemeral post in a channel.<br><br>
  > **Permissions**<br>
  > _Must have create_post_ephemeral permission **(currently only given to system admin)**_
  
+ –í–Ω–∏–º–∞–Ω–∏–µ, –µ—Å–ª–∏ –º–∞—Ç—Ç–µ—Ä–º–æ—Å—Ç –Ω–µ –≤–∏–¥–∏—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
  - –∏–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ —Ö–æ—Å—Ç—É `127.0.0.1`(–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)
  - –∏–ª–∏ –≤ —Ñ–∞–π–ª–µ `.env` –∏–∑–º–µ–Ω–∏—Ç—å `EXTERNAL` —Ö–æ—Å—Ç—ã –Ω–∞ `0.0.0.0`(–¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ `flask run -h 0.0.0.0` –∏–ª–∏ `gunicorn`)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
2. –°–æ–∑–¥–∞—Ç—å –æ–±—â—É—é docker —Å–µ—Ç—å
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä redmine –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä mattermost –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
5. –ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ REST API –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
   `.env` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –§–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `./wsgi/.env`
6. –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `./wsgi/.env` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   mattermost-redmine –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
7. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ mattermost –∫–æ–º–∞–Ω–¥–æ–π c –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ö–æ—Å—Ç–∞ –∏ –ø–æ—Ä—Ç–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

   ```
   /apps install http http://host:port/manifest.json
   ```

8. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
9. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤  `./wsgi/.env`
10. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –¥–∞–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤. –î–ª—è —Ä–∞–±–æ—Ç—ã —Ñ–∏—á–∏ t#ID –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 
–±–æ—Ç–∞ –≤ System Admin.
11. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π **mattermost_login=redmine_login** –≤  `./wsgi/.env`, 
–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ª–æ–≥–∏–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ –∞–∫–∫–∞—É–Ω—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã.
12. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –ø–∞–ø–∫–µ `./wsgi`
    ```shell
    docker compose stop
    docket compose up
    ```
13. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ

## –°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞

![diagram.svg](./imgs/diagram.svg "Diagram project.")

## –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

* –ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ
  https://developers.mattermost.com/integrate/apps/quickstart/quick-start-python/


* –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —É–¥–∞–ª—è—é —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é docker –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –Ω–æ–≤—É—é
  https://docs.docker.com/engine/install/ubuntu/


* –∫–æ–ø–∏—Ä—É–µ–º ./wsgi/.env.example –≤ ./wsgi/.env
  ```shell
  cp ./wsgi/.env.example ./wsgi/.env
  ```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ redmine –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ docker-compose.yml

* –î–ª—è –Ω–∞—á–∞–ª–∞, —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É docker –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
    ```bash
    mkdir ./rm
    cd ./rm
    ```
* C—Ç–∞–≤–ª—é redmine –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –û–±—Ä–∞–∑ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ https://github.com/sameersbn/docker-redmine.git
    + **–í–∞–º –Ω—É–∂–Ω–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∞—à –æ–±—Ä–∞–∑ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π**

* –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å–∞–π—Ç —Å –ª–æ–≥–∏–Ω–æ–º admin –∏ –ø–∞—Ä–æ–ª–µ–º admin, –º–µ–Ω—è–µ–º –ø–∞—Ä–æ–ª—å, –¥–∞–ª–µ–µ `–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ` > `–ù–∞—Å—Ç—Ä–æ–π–∫–∏`
    + –†–∞–∑–¥–µ–ª `–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è` - –î–∞
    + –†–∞–∑–¥–µ–ª `API` - –ü–æ–¥–∫–ª—é—á–∞–µ–º REST
      ![screen1.png](./imgs/screen1.png "Redmine activate API")


## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ mattermost –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —á–µ—Ä–µ–∑ docker-compose.yml

–î–µ—Ç–∞–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—É—Ç
https://developers.mattermost.com/integrate/apps/quickstart/quick-start-python/

–ù–æ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–∏–±–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É https://github.com/mattermost/docker.git
    + **–í–∞–º –Ω—É–∂–Ω–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∞—à –æ–±—Ä–∞–∑ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π**
    + –í —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∞ plugin_app, –ø–æ—ç—Ç–æ–º—É —Å–ª–µ–¥—É—é—Ç —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ 
      https://developers.mattermost.com/integrate/apps/quickstart/quick-start-python/


* mattermost –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
  ![screen2.png](./imgs/screen2.png "Home page for loging")

* –Ω–∞–º –Ω—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∞ –¥–ª—è REST API –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ `./wsgi/.env`.
  ![screen3.png](./imgs/screen3.png "Generate access admin token")

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Redmine –∏ Mattermost

* –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é ./wsgi –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–æ—Ç–æ–º-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.
    ```shell
      docker compose up
    ```

* –¥–∞–≤–∞–π—Ç–µ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–∏–º—Å—è, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –º–æ–∂–µ—Ç –ø–∏–Ω–≥–æ–≤–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
  ```shell
  docker exec -it conteiner_name_app bash
  curl -I http://host_redmine:port_redmine/
  ```
  > HTTP/1.1 200 OK
  ```shell
  curl -I http://host_mattermost:port_mattermost/
  ```
  > HTTP/1.1 405 Method Not Allowed

  curl –∫–æ–º–∞–Ω–¥—ã
  - `GET` curl -I http://localhost:5000/*endpoint
  - `POST` curl --header "Content-Type: application/json"   --request POST   --data '{"item1":"data1","item2":"data2"}' 
     http://127.0.0.1:5000/*endpoint
  

* –ß—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∞—à –∑–∞–ø—É—â–µ–Ω–Ω—ã–π mattermost —Å–∞–π—Ç –∏ –≤–≤–µ—Å—Ç–∏ `/`(slash) –∫–æ–º–∞–Ω–¥—É –ø–æ –ø—Ä–∏–º–µ—Ä—É –∏–∑
  –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. https://developers.mattermost.com/integrate/apps/quickstart/quick-start-python/
  > #### Install the App on Mattermost
  > `/apps install http http://mattermost-apps-python-hello-world:8090/manifest.json`

  –í –º–æ–µ–º —Å–ª—É—á–∞–µ, —è –¥–æ–±–∞–≤–∏–ª –∫–æ–º–∞–Ω–¥—É `/apps install http http://external_ip_address:8090/manifest.json`
* –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ, —Ç–æ —Å–º–æ—Ç—Ä–∏–º –∑–¥–µ—Å—å
  https://developers.mattermost.com/integrate/apps/quickstart/quick-start-python/#uninstall-the-app
* –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –Ω—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ `./wsgi/.env`
  –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –Ω—É–∂–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ `–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏` > `–ê–∫–∫–∞—É–Ω—Ç—ã –±–æ—Ç–æ–≤` > `@redmine`.
  –¢–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø –±–æ—Ç–∞ –∫ Direct —Å–æ–æ–±—â–µ–Ω–∏—è–º, –Ω–∞–∑–Ω–∞—á—å—Ç–µ –µ–º—É —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ç–∞–∫ –∫–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç 
—á–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç c API —Ç–æ–∫–µ–Ω–æ–º.
  ![screen4.png](./imgs/screen4.png "Generate access app token and get privilege.")


* –¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç:
    - —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∏–∫–µ—Ç—ã
    - —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∏–∫–µ—Ç –ø–æ —Ñ–æ—Ä–º–µ Redmine
    - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ä—É—á–µ–Ω—ã –≤–∞–º
    - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–∞–∑–Ω–∞—á–∏–ª–∏
    - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤–∞—Å –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ redmine –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤,
      –∏–ª–∏
      –ø—Ä–∏ –≤–≤–æ–¥–µ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
    - –°–æ–∑–¥–∞–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ –≤ redmine

## –ü–æ–ª–µ–∑–Ω—ã–µ docker –∫–æ–º–∞–Ω–¥—ã

- docker compose up - _Create and start containers_ 
- docker compose down -  _Stop and remove containers, networks_ 

[docker compose commands](https://docs.docker.com/compose/reference/)


## –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã

- –º—ã —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —á–∞—Å—Ç—å
- –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã redmine –∏ mattermost
- —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.test.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  –ü—Ä–∏–º–µ—Ä
  ```text
  APP_SCHEMA=http
  APP_HOST_INTERNAl=127.0.0.1
  APP_PORT_INTERNAL=8090
  APP_HOST_EXTERNAL=127.0.0.1
  APP_PORT_EXTERNAL=8090
  
  MM_SCHEMA=http
  MM_HOST_EXTERNAL=127.0.0.1
  MM_PORT_EXTERNAL=8065
  
  RM_SCHEMA=http
  RM_HOST_EXTERNAL=127.0.0.1
  RM_PORT_EXTERNAL=3000
  
  rm_admin_key=redmine_secret
  mm_app_token=app_secret
  
  app_url_internal=${APP_SCHEMA}://${APP_HOST_INTERNAl}:${APP_PORT_INTERNAL}
  app_url_external=${APP_SCHEMA}://${APP_HOST_EXTERNAL}:${APP_PORT_EXTERNAL}
  
  redmine_url_external=${RM_SCHEMA}://${RM_HOST_EXTERNAL}:${RM_PORT_EXTERNAL}
  mattermost_url_external=${MM_SCHEMA}://${MM_HOST_EXTERNAL}:${MM_PORT_EXTERNAL}
  
  # testing mattermost client
  test_mm_email1=t1@mail
  test_mm_username1=t1
  test_mm_password1=super_secret
  test_mm_first_name1=TestMattermost
  test_mm_last_name1=UserMattermost
  
  test_mm_email2=t2@mail
  test_mm_username2=t2
  test_mm_password2=super_secret
  test_mm_first_name2=TestMattermost2
  test_mm_last_name2=UserMattermost2
  
  # redmine clients
  test_rm_email1=t1@mail.ru
  test_rm_username1=test.user1
  test_rm_password1=super_secret
  test_rm_first_name1=Test1
  test_rm_last_name1=User1
  
  test_rm_email2=t2@mail.ru
  test_rm_username2=test.user2
  test_rm_password2=super_secret
  test_rm_first_name2=Test2
  test_rm_last_name2=User2
  
  # usernames mattermost with redmine account
  # For example:
  # mattermost_username=redmine_username
  # seconad_username_in_mattermost=second_username_in_redmine
  # and etc...
  
  t1=test.user1
  t2=test.user2
  ```
- –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –∏ —Å–º–æ—Ç—Ä–∏–º –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
  ```bash
  coverage run -m pytest
  ```
  
  ```bash
  coverage report 
  ```  

  ```text
  Name                          Stmts   Miss  Cover
  -------------------------------------------------
  ext_funcs.py                      9      0   100%
  tests/__init__.py                 0      0   100%
  tests/blocks_code/blocks.py      30      0   100%
  tests/conftest.py                37      3    92%
  tests/test_app.py               306      0   100%
  wsgi/__init__.py                401     31    92%
  wsgi/client_errors.py             6      0   100%
  wsgi/constants.py                 2      0   100%
  wsgi/decorators.py               29      3    90%
  wsgi/my_bot.py                   27      2    93%
  wsgi/redmine_api.py              48      0   100%
  wsgi/settings.py                 60      2    97%
  wsgi/views.py                    26      2    92%
  -------------------------------------------------
  TOTAL                           981     43    96%
  ```



### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ `help`

![screen8.png](./imgs/screen8.png "Help info.")

### –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è `new_tasks`

![screen5.png](./imgs/screen5.png "Create tickets.")

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–¥–∞–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –º–Ω–µ `tasks_for_me`

![screen6.png](./imgs/screen6.png "Look ticket for me.")

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–¥–∞–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –º–Ω–æ—é `tasks_by_me`

![screen7.png](./imgs/screen7.png "Look my tickets.")

### –°–æ–∑–¥–∞—Ç—å —Ç–∏–∫–µ—Ç –ø–æ —Ñ–æ—Ä–º–µ Redmine `new_task`

![screen10.png](./imgs/screen10.png "form for ticket")

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Reverse Proxy –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  
- –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx
  * —É—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  ```shell
  sudo apt update
  sudo apt install nginx
  ```
  * –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É nginx
  ```shell
  sudo systemctl start nginx
  ```
  * —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  ```shell
  sudo cp ./wsgi/app_nginx /etc/nginx/sites-enabled/app_nginx
  ```
  
  * –æ–±–Ω–æ–≤–∏—Ç–µ —Å–ª—É–∂–±—É nginx
  ```shell
  sudo systemctl reload nginx
  ```
 
## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS(–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è) –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º certbot –Ω–∞ —Å–µ—Ä–≤–µ—Ä, https://certbot.eff.org/
* –°–ª–µ–¥—É–µ–º –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ, certbot –≤—Å—ë –¥–µ–ª–∞–µ—Ç –∑–∞ –≤–∞—Å
  
## –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —É —Å–µ–±—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?

1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É –≤–∞—Å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã —É–ø–æ–º—è–Ω—É—Ç—ã–µ –≤—ã—à–µ
2. –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å https://github.com/ArtemIsmagilov/redmine-mattermost-integrations.git –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É wsgi/
3. –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å .docker.env.exampple –≤ .docker.env –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
4. –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å app_nginx –≤ /etc/nginx/sites-enables/ —Ä—è–¥–æ–º –≤ default —Å—Å—ã–ª–∫–æ–π, –∑–∞–º–µ–Ω–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
(–ø–æ—Ä—Ç—ã, –ø—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º). –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è http, 
–¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è https
5. –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã gunicorn.conf.py(accesslog*=–∏–º—è —Ñ–∞–π–ª–∞, loglevel='error', –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤, –ø—É—Ç—å –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º)
6. –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
7. —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π –≤ mattermost /apps install http ...
8. —Å–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è –±–æ—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–ª—è REST API –æ–ø–µ—Ä–∞—Ü–∏–π. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥—É –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å websocket [Subscriptions](https://developers.mattermost.com/integrate/apps/functionality/subscriptions/)
   > ### Note:
   > #### Bots need to join a channel before subscribing to that channel‚Äôs events. Similarly, bots need to join a team before subscribing to that team‚Äôs events.
10. –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ .docker.env –∏ –∑–∞–Ω–æ–≤–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

* `mattermostautodriver`.
    - Github https://github.com/embl-bio-it/python-mattermost-autodriver
    - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è https://embl-bio-it.github.io/python-mattermost-autodriver
* `python-redmine`.
    - Github https://github.com/maxtepkeev/python-redmine
    - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è https://python-redmine.com

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

* REST API redmine - https://www.redmine.org/projects/redmine/wiki/Developer_Guide
* –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `hello world` –≤ mattermost –Ω–∞ python -
  https://developers.mattermost.com/integrate/apps/quickstart/quick-start-python/
* REST API mattermost - https://api.mattermost.com/
* matterbridge https://github.com/42wim/matterbridge
* Mattermost chat plugin for Redmine - https://github.com/altsol/redmine_mattermost
* Docker image Redmine - https://hub.docker.com/_/redmine
* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ redmine —á–µ—Ä–µ–∑
  docker-compose - https://kurazhov.ru/install-redmine-on-docker-compose/?ysclid=lhu5e6s0bb161225177
* –ß–∞—Ç-–±–æ—Ç –¥–ª—è mattermost - https://habr.com/ru/companies/hh/articles/727246/
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–æ–∫–µ—Ä—É - https://docs.docker.com/engine/install/
* HTTPS –Ω–∞ Flask - https://blog.miguelgrinberg.com/post/running-your-flask-application-over-https
* –ü—Ä–æ–∫—Å–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - https://dvmn.org/encyclopedia/web-server/deploy-django-nginx-gunicorn/
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Gunicorn - https://docs.gunicorn.org/en/latest/install.html
* Redmine docker –≤ production - https://github.com/sameersbn/docker-redmine.git
* Mattermost docker –≤ production - https://github.com/mattermost/docker.git

## –° –∫–∞–∫–∏–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è –ø—Ä–æ–±–ª–µ–º–∞–º–∏
- –ù–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç mattermost(–∞), –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª websocket
—á–µ—Ä–µ–∑ —Ñ–æ—Ä—É–º—ã —É–∑–Ω–∞–ª, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è, –¥–∞–∂–µ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –ù–µ—Ç –Ω–∏–∫–∞–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–∫—Ä–∞–π–Ω–µ –º–∞–ª–æ) –ø–æ —Ä–∞–±–æ—Ç–µ —Å websocket. –ß–µ—Ä–µ–∑ websocket —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
—Ç–∞–∫ –∫–∞–∫ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è —Ñ–æ—Ä–º—ã. –í–∞–∂–Ω–æ –ª–∏—à—å —É–∫–∞–∑–∞—Ç—å —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é
- –ù–µ —Ä–∞–±–æ—Ç–∞–ª Websocket –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏. –í—ã—è—Å–Ω–∏–ª–æ—Å—å, websocket —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–∞–º.
–î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, —É—Å—Ç–∞–Ω–æ–≤–∏–ª –≤–µ—Ä—Å–∏—é mattermost –∫–∞–∫ —É –∑–∞–∫–∞–∑—á–∏–∫–∞ _7.7.1_
- python:latest –≤–µ—Ä—Å–∏—è –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤–µ—Å–∏—Ç –æ–∫–æ–ª–æ 1 GB, –ø—Ä–æ–±—É—é –∑–∞–≥—Ä—É–∂–∞—Ç—å –æ–±—Ä–∞–∑ python:slim. –í–µ—Ä—Å–∏—è slim
–±—ã—Å—Ç—Ä–µ–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –º–µ–Ω—å—à–µ –≤–µ—Å–∏—Ç(—Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã), –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ 
—Å—Ç–∞—Ç—É—Å—ã –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö –≤ python)
- –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–ª–∞–≥–∏–Ω–∞, –±–æ—Ç –Ω–µ –¥–æ–±–∞–≤–ª—è–ª—Å—è –≤ –∫–∞–Ω–∞–ª, –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –≤–∏–∑—É–∞–ª—å–Ω–æ —Å—Ä–∞–∑—É –Ω–µ –ø–æ–Ω—è—Ç—å —á—Ç–æ –æ–Ω –ø–æ—è–≤–∏–ª—Å—è —Å—Ä–∞–∑—É.
–î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –¥–∏—Ä–µ–∫—Ç –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–µ–≥–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã, —á–µ–≥–æ –º—ã –∏ —Ö–æ—Ç–∏–º https://forum.mattermost.com/t/add-a-bot-to-channels/8355/15

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞
- –î–æ–±–∞–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫

## –ù–µ –ø–æ —Ç–µ–º–µ

–ï—Å–ª–∏ –≤–∞–º –Ω–∞–¥–æ–µ–ª –ø–µ—Ä–µ–≥—Ä–µ–≤ –Ω–æ—É—Ç–±—É–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ Oracle VirtualBox, —Ç–æ –æ–¥–Ω–æ –ø–µ—Ä–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π - –æ—Ç–∫–ª—é—á–∏—Ç—å –∑–∞–ø–∏—Å—å –ª–æ–≥–æ–≤.
–ü–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, —É –º–µ–Ω—è —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Å–Ω–∏–∑–∏–ª–æ—Å—å —Å **–û—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–≥–æ** –¥–æ **–í—ã—Å–æ–∫–æ–≥–æ**, –∏–Ω–æ–≥–¥–∞ **–£–º–µ—Ä–µ–Ω–Ω—ã–π**.
–ò—Å–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –≤—ã —á—Ç–æ-—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç–µ.

**–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤** 
- https://www.virtualbox.org/ticket/11988
- https://ubuntuforums.org/showthread.php?t=879256
- –í—ã–±–∏—Ä–∞–µ–º –ø–∞–ø–∫—É C:\Users\user\VirtualBox VMs\Ubuntu\Logs –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ -> `–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å` -> `–ò–∑–º–µ–Ω–∏—Ç—å` -> –í—ã–±–∏—Ä–∞–µ–º –Ω–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è VBox -> –°—Ç–∞–≤–∏–º –≥–∞–ª–æ—á–∫—É `–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å` -> `–ü—Ä–∏–º–µ–Ω–∏—Ç—å`. –¢–µ–ø–µ—Ä—å –∑–∞–ø–∏—Å—å –ª–æ–≥–æ–≤ –±—É–¥–µ—Ç –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞. –≠—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏ –ø–∞–º—è—Ç—å –æ—Ç –ª–∏—à–Ω–µ–π —Ä–∞–±–æ—Ç—ã.
  
